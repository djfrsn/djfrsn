generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL_WITH_SCHEMA")
}

model User {
  email String  @unique
  id    Int     @default(autoincrement()) @id
  name  String?
  posts Post[]
}

model Post {
  authorId  Int?
  content   String?
  id        Int     @default(autoincrement()) @id
  published Boolean @default(false)
  title     String
  author    User?   @relation(fields: [authorId], references: [id])
}

model Contract {
  id              Int @default(autoincrement()) @id
  label           String
  name            String
  isCall          Boolean @default(false)
  active          Boolean @default(false)
  strikePrice     Int
  dateLive        DateTime
  dateExpires     DateTime
  dateExercise    DateTime
  underlyingAsset String
  derivativeType  String
  openInterest    Int
  min_increment   Int
  multiplier      Int
}

model Job {
  id        Int @default(autoincrement()) @id
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt @default(now())
  modelId   Int? @unique
  modelName String?
  jobId     String?
  name      String?
  queueName String?
}

model TickerListInfo {
  id            Int @default(autoincrement()) @id
  updatedAt     DateTime @updatedAt @default(now())
  lastRefreshed DateTime
}

model MarketIndex {
  id   Int @default(autoincrement()) @id
  name String
  displayName String
  lastRefreshed  DateTime?
  tickers Ticker[]
}

model MarketInterval {
  id   Int @default(autoincrement()) @id
  name String
  timeSeries TickerInfo[]
}

model Ticker {
  id             Int @default(autoincrement()) @id
  updatedAt      DateTime @updatedAt @default(now())
  lastRefreshed  DateTime?
  symbol         String
  name           String
  sector         String
  subSector      String
  headQuarter    String
  dateFirstAdded String
  cik            String
  founded        String
  marketIndexId  Int?
  marketIndex    MarketIndex?   @relation(fields: [marketIndexId], references: [id])
  timeSeries     TickerInfo[]
}

model TickerInfo {
  id            Int @default(autoincrement()) @id
  date          DateTime
  updatedAt     DateTime @updatedAt @default(now())
  intervalId    Int?
  interval      MarketInterval? @relation(fields: [intervalId], references: [id])
  open          String?
  close         String
  high          String?
  low           String?
  volume        String?
  tickerId      Int?
  ticker        Ticker? @relation(fields: [tickerId], references: [id])
}